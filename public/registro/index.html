<!DOCTYPE html><html lang="es"> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><title>Crear Cuenta</title><link rel="stylesheet" href="/_astro/carrito.BjKxnswG.css"></head> <body class="bg-gray-50 text-gray-900"> <nav class="bg-white shadow-md p-4 mb-8"> <div class="container mx-auto flex justify-between items-center"> <a href="/" class="text-2xl font-bold text-blue-600">LIBRERIA</a> <div class="flex gap-4 items-center" id="nav-links"> <a href="/" class="hover:text-blue-500">Productos</a> <a href="/carrito" class="hover:text-blue-500">ðŸ›’ Carrito</a> </div> </div> </nav> <main class="container mx-auto px-4">  <div class="max-w-md mx-auto bg-white p-8 border border-gray-200 rounded-lg shadow-sm mt-10"> <h1 class="text-2xl font-bold mb-6 text-center">Registro de Usuario</h1> <form id="register-form" class="space-y-4"> <div> <label class="block text-sm font-medium">Nombre Completo</label> <input type="text" id="nombre" name="nombre" required class="w-full p-2 border rounded mt-1"> </div> <div> <label class="block text-sm font-medium">Email</label> <input type="email" id="email" name="email" required class="w-full p-2 border rounded mt-1"> </div> <div> <label class="block text-sm font-medium">ContraseÃ±a</label> <input type="password" id="password" name="password" required class="w-full p-2 border rounded mt-1" minlength="6"> </div> <button type="submit" id="submit-btn" class="w-full bg-green-600 text-white py-2 rounded font-semibold hover:bg-green-700 transition-colors">
Registrarse
</button> <p id="error-msg" class="text-red-500 text-sm hidden text-center mt-2"></p> </form> </div> <script type="module">(function(){const s=document.getElementById("register-form"),o=document.getElementById("error-msg"),n="http://localhost:3000";s?.addEventListener("submit",async c=>{c.preventDefault();const i=new FormData(s),r=Object.fromEntries(i.entries());console.log("Enviando a:",`${n}/auth/register`),console.table(r);try{const e=await fetch(`${n}/auth/register`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(r)});console.log("Respuesta del servidor - Status:",e.status);const t=await e.json();if(console.log("JSON recibido:",t),e.ok&&t.status==="success"){const a=t.data?.token;a&&(localStorage.setItem("token",a),window.location.href="/")}else o&&(o.textContent=t.message||"Error en el registro",o.classList.remove("hidden"))}catch(e){console.error("Error en Fetch:",e),alert("No se pudo conectar con la API. Revisa la consola.")}})})();</script>  </main> <script type="module">const t=localStorage.getItem("token"),e=document.getElementById("nav-links");t?(e.innerHTML+=`
					<a href="/perfil" class="hover:text-blue-500">Mi Perfil</a>
					<button id="logout" class="bg-red-500 text-white px-3 py-1 rounded">Salir</button>
				`,document.getElementById("logout")?.addEventListener("click",()=>{localStorage.removeItem("token"),window.location.href="/login"})):e.innerHTML+=`
					<a href="/login" class="hover:text-blue-500">Login</a>
					<a href="/registro" class="hover:text-blue-500 font-bold">Registro</a>
				`;</script> </body> </html>