<!DOCTYPE html><html lang="es"> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><title>Iniciar Sesi√≥n</title><link rel="stylesheet" href="/_astro/carrito.BjKxnswG.css"></head> <body class="bg-gray-50 text-gray-900"> <nav class="bg-white shadow-md p-4 mb-8"> <div class="container mx-auto flex justify-between items-center"> <a href="/" class="text-2xl font-bold text-blue-600">LIBRERIA</a> <div class="flex gap-4 items-center" id="nav-links"> <a href="/" class="hover:text-blue-500">Productos</a> <a href="/carrito" class="hover:text-blue-500">üõí Carrito</a> </div> </div> </nav> <main class="container mx-auto px-4">  <div class="max-w-md mx-auto bg-white p-8 border border-gray-200 rounded-lg shadow-sm"> <h1 class="text-2xl font-bold mb-6 text-center">Bienvenido de nuevo</h1> <form id="login-form" class="space-y-4"> <div> <label class="block text-sm font-medium">Email</label> <input type="email" id="email" required class="w-full p-2 border rounded mt-1" placeholder="tu@email.com"> </div> <div> <label class="block text-sm font-medium">Contrase√±a</label> <input type="password" id="password" required class="w-full p-2 border rounded mt-1"> </div> <button type="submit" class="w-full bg-blue-600 text-white py-2 rounded font-semibold hover:bg-blue-700 transition-colors">
Entrar
</button> <p id="error-msg" class="text-red-500 text-sm hidden text-center"></p> </form> </div> <script type="module">const r=document.getElementById("login-form");document.getElementById("error-msg");const l="http://localhost:3000";r?.addEventListener("submit",async n=>{n.preventDefault();const a=document.getElementById("email").value,s=document.getElementById("password").value;try{const t=await fetch(`${l}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a,password:s})}),e=await t.json();if(t.ok){const o=e.data?.token||e.token||(typeof e=="string"?e:null);o?(localStorage.setItem("token",o),console.log("‚úÖ Token guardado correctamente"),window.location.href="/"):console.error("‚ùå No se encontr√≥ token en la respuesta",e)}}catch(t){console.error(t)}});</script>  </main> <script type="module">const t=localStorage.getItem("token"),e=document.getElementById("nav-links");t?(e.innerHTML+=`
					<a href="/perfil" class="hover:text-blue-500">Mi Perfil</a>
					<button id="logout" class="bg-red-500 text-white px-3 py-1 rounded">Salir</button>
				`,document.getElementById("logout")?.addEventListener("click",()=>{localStorage.removeItem("token"),window.location.href="/login"})):e.innerHTML+=`
					<a href="/login" class="hover:text-blue-500">Login</a>
					<a href="/registro" class="hover:text-blue-500 font-bold">Registro</a>
				`;</script> </body> </html>