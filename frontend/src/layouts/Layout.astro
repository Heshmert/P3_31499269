---
// Layout.astro
import '../styles/global.css';
interface Props {
	title: string;
}

const { title } = Astro.props;
---

<!doctype html>
<html lang="es">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width" />
		<title>{title}</title>
	</head>
	<body class="bg-gray-50 text-gray-900">
		<nav class="bg-white shadow-md p-4 mb-8">
			<div class="container mx-auto flex justify-between items-center">
				<a href="/" class="text-2xl font-bold text-blue-600">MiTienda</a>
				<div class="flex gap-4 items-center" id="nav-links">
					<a href="/" class="hover:text-blue-500">Productos</a>
					<a href="/carrito" class="hover:text-blue-500">ðŸ›’ Carrito</a>
					</div>
			</div>
		</nav>

		<main class="container mx-auto px-4">
			<slot />
		</main>

		<script>
			// LÃ³gica bÃ¡sica para mostrar/ocultar links segÃºn el JWT
			const token = localStorage.getItem('token');
			const navLinks = document.getElementById('nav-links');
			
			if (token) {
				navLinks.innerHTML += `
					<a href="/perfil" class="hover:text-blue-500">Mi Perfil</a>
					<button id="logout" class="bg-red-500 text-white px-3 py-1 rounded">Salir</button>
				`;
				document.getElementById('logout')?.addEventListener('click', () => {
					localStorage.removeItem('token');
					window.location.href = '/login';
				});
			} else {
				navLinks.innerHTML += `
					<a href="/login" class="hover:text-blue-500">Login</a>
					<a href="/registro" class="hover:text-blue-500 font-bold">Registro</a>
				`;
			}
		</script>
	</body>
</html>